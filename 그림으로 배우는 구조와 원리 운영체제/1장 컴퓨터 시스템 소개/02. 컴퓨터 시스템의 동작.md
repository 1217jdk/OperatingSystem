# 02. 컴퓨터 시스템의 동작

## 1. 명령어 구조

- 연산 부호(OPcode) : 프로세서가 실행할 동작인 연산을 지정. 산술 연산 논리 연산, 시프트, 보수 등의 연산을 정의한다. 연산 부호가 n비트이면 최대 2^n개 연산이 가능하다.
- 피연산자(operand) : 연산할 데이터 정보를 저장. 데이터는 레지스터, 메모리, 가상 기억장치, 입출력 장치 등에 위치할 수 있음. 보통 데이터 자체보다는 데이터의 위치를 저장.

명령어는 실행 전에 메인 메모리에 저장하며, 한 번에 하나씩 프로세서에 순차적으로 전송하여 해석, 실행한다. 피 연산자를 여러 개 가질 수도 있다.

- 직접 주소 : 피연산자에 데이터가 있는 레지스터나 메모리 주소를 저장. 직접 주소는 연산 코드를 저장하고 남은 비트로 데이터 주소를 저장해야해서 한정된 메모리 주소를 사용함
- 간접 주소 : 피연산자에 데이터가 있는 레지스터나 메모리 주소가 저장된 주소를 저장. 메모리에 두 번 접근해야하지만, 긴 주소에 접근이 가능하다.

## 2. 명령어 실행

### 2.1 명령어 실행 사이클

```
1. 명령어 인출
2. 명령어 해석, 프로그램 카운터 변경
3. 피연산자 인출
4. 명령어 실행
5. 결과 저장
```

### 2.2 인출 사이클

- 명령어 실행 사이클의 첫 번째 단계
- 메모리에서 명령어를 읽어 명령어 레지스터에 저장
- 다음 명령어를 가르키기 위해 PC를 증가

### 2.3 실행 사이클

- 명령어를 해독
- 결과에 따라 제어 신호 발생

### 2.4 간접 사이클

- 직접 주소 지정 방법을 사용하면 실행 사이클은 명령어를 즉시 수행
- 간접 주소 지정 방법은 유효 주소를 한 번 더 읽어 오는 과정 필요

### 2.5 인터럽트 사이클

- 인터럽트는 프로세서가 프로그램을 수행하는 동안 예기치 못한 사건을 의미
- 프로세서는 실행 사이클을 완료한 후 인터럽트 요구가 있는지 검사
- 인터럽트가 발생하면 현재 수행 중인 프로그램의 주소를 특정 장소(스택, 메모리 0번지 등)에 저장하고 인터럽트 처리 루틴을 실행

## 3. 인터럽트 명령어

단일 프로세서 컴퓨터는 한 번에 한 개의 명령어만 수행할 수 있지만, 인터럽트를 사용하면 중간에 다른 프로그램의 명령어를 수행할 수 있다. 사용자가 별도의 조치를 할 필요 없이 프로세서와 운영체제가 인터럽트를 처리한다.

인터럽트가 없다면 폴링 방식으로 프로세서가 연산을 수행 하기 전, 매번 장치들의 상태를 검사해야한다. 하지만, 인터럽트가 있으면 프로세서는 장치들이 준비가 다 되어 인터럽트 신호를 보내기 전까지 자신의 할 일을 처리하면 된다.

### 3.1 인터럽트 요청 회선

- 단일 회선 : 모든 장치를 공통의 단일 회선으로 프로세서에 연결하기 때문에 어느 장치에서 호출한 것인지 판별하는 기능이 필요하다.
- 다중 회선 : 모든 장치를 서로 다른 고유의 회선으로 프로세서와 연결하는 방법이다.
